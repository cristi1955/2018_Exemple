define(["require","exports","tslib","external/react","external/classnames","modules/clean/abuse/report_flag","modules/clean/react/deprecated/copyright_flag","modules/clean/react/file_viewer/actions","modules/constants/file_viewer","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/more_dropdown","modules/clean/react/file_viewer/utils","modules/clean/react/size_class/constants","modules/clean/react/open_in_app/button","modules/clean/react/paper/open_in_paper_button","modules/clean/react/share_download/button","modules/clean/react/share_download/util","modules/clean/react/title_bar/controls_container","modules/clean/react/user_notifications/constants","modules/clean/react/user_notifications/dropdown","modules/clean/react/paper/paper_log","modules/clean/sharing/api/client","modules/clean/sharing/delete_link_modal","modules/constants/abuse_report","modules/core/browser","modules/core/i18n"],function(e,n,r,t,o,s,a,i,l,c,u,d,p,m,_,h,f,k,g,v,w,E,L,A,P,I){"use strict";function N(e){return function(){return i.logUserAction(e,c.UserActionContextNames.TITLE_BAR_MAIN)}}function y(e){var n=e.isPrimaryButton,r=o({"sign-in-link":!0,control__button:!0,"button-secondary":n,"button-primary":!n});return t.createElement("a",{className:r,href:d.getSharedLinkLoginUrl(),onClick:N(c.UserActionNames.SIGN_IN)},I._("Sign in"))}function C(e){var n=e.sharedLinkInfo;return A.REPORT_ENABLED?t.createElement(s.ReportFlag,{sharedLink:n.url}):t.createElement(a.CopyrightFlag,{sharedLink:n.url})}Object.defineProperty(n,"__esModule",{value:!0});var T=(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.removeShareLink=function(){var e=new E.ShareApiClient({userId:n.props.sharePermissions.canRemoveLinkUids[0]});return L.deleteLinkWithConfirmLegacy({client:e,contentName:n.props.file.filename,onCancel:null,onDeleteLink:function(){return P.redirect("/home")},tkey:n.getTkey()})},n.isDownloadAllowed=function(){return n.props.sharePermissions&&n.props.sharePermissions.canDownloadRoles.length>0},n}return r.__extends(n,e),n.prototype.getTkey=function(){return this.props.sharePermissions&&this.props.sharePermissions.canRemoveLinkUids.length>0?this.props.shareToken.linkKey:null},n.prototype.render=function(){var e=this.props,n=e.file,r=e.sharedLinkInfo,o=e.sharePermissions,s=e.shareToken,a=e.showOpenInAppButton,i=e.sizeClass,d=e.user;if(i!==p.SizeClass.Large)return t.createElement(u.MoreDropdown,{allowRemoveLink:!!this.getTkey(),file:n,isPrivate:!1,onRemoveShareLink:this.removeShareLink,renderSignIn:!d,sizeClass:i,shareDownloadOptions:f.getDownloadOptions(o,r,s,n)});var E=this.isDownloadAllowed()&&l.OPEN_IN_PAPER_VARIANT in["VARIANT_A","ON"]&&d&&!d.is_paper_disabled;return E&&w.default(w.PaperEventTypes.CTA_SEEN,{source:"shared_file_actions",cta:"open_in_paper_button"}),t.createElement(k.TitleBarControlsContainer,null,r.hasPublicAudienceOrVisibility!==!1?t.createElement(C,{sharedLinkInfo:r}):null,a?t.createElement(m.OpenInAppButton,{urls:this.props.file.open_in_app_data}):null,d?null:t.createElement(y,{isPrimaryButton:a}),E?t.createElement(_.OpenInPaperButton,{file:n,sharedLink:r.url}):null,s&&o?t.createElement(h.ShareDownloadButton,{location:c.FileViewerPane.PREVIEW_CONTENT,fileOrFolder:n,sharedLinkInfo:r,sharePermissions:o,shareToken:s,user:d}):null,t.createElement(u.MoreDropdown,{allowRemoveLink:!!this.getTkey(),file:n,isPrivate:!1,onRemoveShareLink:this.removeShareLink,sizeClass:i}),d?t.createElement("div",{className:"react-title-bar__divider"}):null,d?t.createElement(v.UserNotificationsDropdown,{isPagelet:!1,onClick:N(c.UserActionNames.CLICK_NOTIFICATIONS),bellDesign:g.BellDesignTypes.GRAY_ICON}):null)},n.defaultProps={user:null},n})(t.Component);n.SharedFileActions=T});
//# sourceMappingURL=shared_file_actions.min.js-vflFzQ-y0.map